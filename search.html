<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouBike Rates</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #ffcc00;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        footer {
            height: 5vh;
            text-align: center;
            background-color: #262f3c;
        }

        .line {
            position: relative;
        }

        .line::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top left, transparent 49.5%, #ddd 49.5%, #ddd 50.5%, transparent 50.5%);
            pointer-events: none;
        }
    </style>
</head>

<body>
    <header style="background-color: w;">
        <header>
            <div class="container">
                <div class="row">
                    <h1 style="padding: 20px;">Ubike 查詢</h1>
                </div>
            </div>
            <hr style="margin-top: 0;">
            <div class="container">
                <div class="row">
                    <ul style="display: flex;">
                        <a href="index.html">回到主頁</a>
                        <a style="margin-left: 20px;" href="cpe.html">快速查詢</a>
                        <a style="margin-left: 20px;" href="https://activity.youbike.com.tw/">活動專區</a>
                        <a style="margin-left: 20px;" href="rate.html">計費方式</a>
                        <a style="margin-left: 20px;" href="self.html">關於我們</a>
                    </ul>
                </div>
            </div>
            <hr style="margin-top: 0; margin-bottom: 0;">
            <div class="container py-5">
                <div class="row">
                    <div class="col text-center">
                        <h1>快速查詢</h1>
                        <div id="district-checkboxes">
                        <label class="checkbox-label">
                            <input type="checkbox" name="中區" id="中區" />中區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="東區" id="東區" />東區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="南區" id="南區" />南區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="西區" id="西區" />西區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="北區" id="北區" />北區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="北屯區" id="北屯區" />北屯區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="西屯區" id="西屯區" />西屯區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="南屯區" id="南屯區" />南屯區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="太平區" id="太平區" />太平區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="大里區" id="大里區" />大里區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="霧峰區" id="霧峰區" />霧峰區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="烏日區" id="烏日區" />烏日區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="豐原區" id="豐原區" />豐原區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="后里區" id="后里區" />后里區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="石岡區" id="石岡區" />石岡區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="東勢區" id="東勢區" />東勢區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="和平區" id="和平區" />和平區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="新社區" id="新社區" />新社區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="潭子區" id="潭子區" />潭子區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="大雅區" id="大雅區" />大雅區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="神岡區" id="神岡區" />神岡區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="大肚區" id="大肚區" />大肚區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="沙鹿區" id="沙鹿區" />沙鹿區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="龍井區" id="龍井區" />龍井區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="梧棲區" id="梧棲區" />梧棲區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="清水區" id="清水區" />清水區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="大甲區" id="大甲區" />大甲區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="外埔區" id="外埔區" />外埔區
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="大安區" id="大安區" />大安區
                        </label>
                    </div>
                    </div>
                    <table id="stations-table" border="1">
                        <thead>
                          <tr>
                            <th>站點名稱</th>
                            <th>可借車輛</th>
                            <th>可還車輛</th>
                          </tr>
                        </thead>
                        <tbody>
                          <!-- Station information will be displayed here -->
                        </tbody>
                      </table>
                </div>
            </div>
            <script>
                // 這裡假設您的 JSON 文件位於伺服器上的 '/path/to/your/data.json'
                var jsonFilePath = 'ubikedata.json';

                fetch(jsonFilePath)
                    .then(function (response) {
                        // 確保文件成功加載
                        if (!response.ok) {
                            throw new Error('Network response was not ok.');
                        }
                        return response.json(); // 解析 JSON 數據
                    })
                    .then(function (data) {
                        // 現在 data 變量包含了解析後的 JSON 對象
                        // 您可以在這裡編寫處理數據的代碼
                        createCheckboxes(data);
                    })
                    .catch(function (error) {
                        // 如果有錯誤，比如文件找不到，或者不是有效的 JSON
                        console.error('Error fetching and parsing data:', error);
                    });

                function createCheckboxes(data) {
                    var checkboxesContainer = document.getElementById('district-checkboxes');
                    var districtStations = {};

                    // 從 JSON 數據中提取區域和站點信息
                    data.retVal.forEach(function (station) {
                        var district = station.sarea;
                        if (!districtStations[district]) {
                            districtStations[district] = [];
                        }
                        districtStations[district].push({
                            name: station.sna,
                            availableBikes: station.sbi,
                            emptySlots: station.bemp
                        });
                    });

                    // 為每個區域創建一個 checkbox
                    Object.keys(districtStations).forEach(function (district) {
                        var checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.id = district;
                        checkbox.value = district;

                        var label = document.createElement('label');
                        label.htmlFor = district;
                        label.textContent = district;

                        checkboxesContainer.appendChild(checkbox);
                        checkboxesContainer.appendChild(label);

                        checkbox.addEventListener('change', function (event) {
                            displayStationsInfo(event.target.value, districtStations[district]);
                        });
                    });
                }

                function displayStationsInfo(district, stations) {
                    var tableBody = document.querySelector('#stations-table tbody');
                    tableBody.innerHTML = ''; // 清空表格

                    stations.forEach(function(station) {
                        var row = document.createElement('tr');
                        row.innerHTML = `<td>${station.name}</td><td>${station.availableBikes}</td><td>${station.emptySlots}</td>`;
                        tableBody.appendChild(row);
                    });
                    }

                // 您可以在 createCheckboxes 函數中實現先前描述的功能
            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
                crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
                integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/L8WvCWPIPm49"
                crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
                integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
                crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"
                integrity="sha384-lpyLfhYuitXl2zRZ5Bn2fqnhNAKOAaM/0Kr9laMspuaMiZfGmfwRNFh8HlMy49eQ"
                crossorigin="anonymous"></script>
            <footer style="background-color: bisque; text-align: center;">
                <p>Mark'<s></s></p>
            </footer>

</html>